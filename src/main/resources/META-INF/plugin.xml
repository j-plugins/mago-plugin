<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.xepozz.mago</id>
    <name>Mago â€“ PHP Toolchain</name>
    <vendor email="xepozz@list.ru" url="https://github.com/xepozz">Dmitrii Derepko (@xepozz)</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.jetbrains.php</depends>
    <depends optional="true" config-file="language-toml.xml">org.toml.lang</depends>
    <depends optional="true" config-file="language-json.xml">com.intellij.modules.json</depends>
    <depends config-file="php-remote-interpreter.xml" optional="true">
        org.jetbrains.plugins.phpstorm-remote-interpreter
    </depends>

    <resource-bundle>messages.MagoBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <fileType
                id="mago.toml"
                name="Mago File"
                implementationClass="com.github.xepozz.mago.file.MagoTextFileType"
                fieldName="INSTANCE"
                language="TEXT"
                fileNames="mago.toml"
                fileNamesCaseInsensitive="mago.toml"
                order="last"
        />
        <externalFormatProcessor
                implementation="com.github.xepozz.mago.formatter.MagoExternalFormatter"
                order="first"/>
        <projectConfigurable
                instance="com.github.xepozz.mago.configuration.MagoConfigurable"
                bundle="messages.MagoBundle"
                key="configurable.quality.tool.php.mago"
                id="settings.php.quality.tools.php.mago"
                parentId="settings.php.quality.tools"
                groupWeight="30"
        />

        <localInspection
                language="PHP"
                shortName="MagoValidationInspection"
                groupPath="PHP"
                groupName="Quality tools"
                enabledByDefault="true"
                level="WEAK WARNING"
                implementationClass="com.github.xepozz.mago.qualityTool.MagoValidationInspection"
                key="inspection.mago.display.name"/>

        <globalInspection
                language="PHP"
                shortName="MagoGlobal"
                groupPath="PHP"
                groupName="Quality tools"
                enabledByDefault="true"
                level="WEAK WARNING"
                implementationClass="com.github.xepozz.mago.qualityTool.MagoGlobalInspection"
                key="inspection.mago.global.display.name"/>

        <externalAnnotator
                language="PHP"
                implementationClass="com.github.xepozz.mago.qualityTool.MagoAnnotatorProxy"/>
        <completion.contributor
                language="PHP"
                implementationClass="com.github.xepozz.mago.php.completion.PhpDocCompletionContributor"/>
    </extensions>

    <extensions defaultExtensionNs="com.jetbrains.php">
        <tools.quality.type
                implementation="com.github.xepozz.mago.qualityTool.MagoQualityToolType"/>
        <composerConfigClient
                implementation="com.github.xepozz.mago.composer.MagoComposerConfig"/>
        <openSettingsProvider
                implementation="com.github.xepozz.mago.composer.MagoOpenSettingsProvider"/>
        <config.interpreters.PhpInterpretersStateListener
                implementation="com.github.xepozz.mago.configuration.MagoInterpreterStateListener"/>
    </extensions>

    <extensionPoints>
        <extensionPoint
                dynamic="true"
                name="magoConfigurationProvider"
                interface="com.github.xepozz.mago.configuration.MagoConfigurationProvider"/>
    </extensionPoints>
    <actions>
        <action
                id="com.github.xepozz.mago.qualityTool.MagoAddToIgnoredAction"
                class="com.github.xepozz.mago.qualityTool.MagoAddToIgnoredAction">
            <add-to-group group-id="PHPQualityToolsAddToIgnoredList" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
